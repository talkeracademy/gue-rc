<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Uzbek Education | Research Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap');
        
        body { 
            margin: 0; 
            background: #020617; 
            font-family: 'Inter', sans-serif; 
            color: white;
            overflow-x: hidden;
            overflow-y: auto;
            min-height: 100vh;
        }

        body.light-mode {
            background: #f8fafc;
            color: #0f172a;
        }

        body.light-mode .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(15, 23, 42, 0.1);
            color: #1e293b;
        }

        body.light-mode .nav-item { color: #1e293b; }
        body.light-mode input, body.light-mode textarea { background: white !important; color: #0f172a !important; border: 1px solid #ddd !important; }

        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 32px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            color: white;
            background: none;
            border: none;
            cursor: pointer;
        }

        .nav-item:hover {
            transform: scale(1.1);
            color: #22d3ee;
        }

        .nav-item i {
            font-size: 2.8rem;
            margin-bottom: 12px;
            filter: drop-shadow(0 0 8px rgba(34, 211, 238, 0.3));
        }

        .nav-item span {
            font-size: 0.875rem;
            font-weight: 500;
            white-space: nowrap;
        }

        html { scroll-behavior: smooth; }

        /* Smooth Toast Animation */
        #toast.show {
            animation: slideUp 0.5s forwards, fadeOut 0.5s 3.5s forwards;
        }

        @keyframes slideUp {
            from { transform: translate(-50%, 100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <nav class="flex justify-between items-center p-10">
        <div>
            <h1 id="main-title" class="text-4xl font-bold tracking-tight">Global Uzbek Education</h1>
            <p id="main-subtitle" class="text-[11px] tracking-[0.5em] uppercase opacity-50 mt-1">Research Center</p>
        </div>
        <div class="flex items-center space-x-8 text-2xl">
            <div class="relative group flex items-center">
                <img id="currentFlag" src="https://flagcdn.com/w40/uz.png" class="w-8 rounded shadow-2xl cursor-pointer border border-white/10" alt="UZ">
                <div class="absolute top-full right-0 mt-2 py-2 bg-white dark:bg-slate-900 border border-black/5 dark:border-white/10 rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50 min-w-[140px]">
                    <button onclick="changeLang('uz')" class="w-full flex items-center space-x-3 px-4 py-2 hover:bg-cyan-500/10 transition text-sm">
                        <img src="https://flagcdn.com/w40/uz.png" class="w-5 rounded-sm"> <span class="dark:text-white">O'zbek</span>
                    </button>
                    <button onclick="changeLang('en')" class="w-full flex items-center space-x-3 px-4 py-2 hover:bg-cyan-500/10 transition text-sm">
                        <img src="https://flagcdn.com/w40/gb.png" class="w-5 rounded-sm"> <span class="dark:text-white">English</span>
                    </button>
                    <button onclick="changeLang('tr')" class="w-full flex items-center space-x-3 px-4 py-2 hover:bg-cyan-500/10 transition text-sm">
                        <img src="https://flagcdn.com/w40/tr.png" class="w-5 rounded-sm"> <span class="dark:text-white">Türkçe</span>
                    </button>
                </div>
            </div>

            <i id="themeToggle" class="fa-solid fa-moon cursor-pointer hover:text-cyan-400 transition"></i>
            <i id="userBtn" class="fa-regular fa-user cursor-pointer hover:text-cyan-400 transition"></i>
            <button id="memberLogoutBtn" class="hidden text-xs bg-red-500/20 text-red-400 px-3 py-1 rounded-full border border-red-500/30 hover:bg-red-500/40 transition">Logout</button>
        </div>
    </nav>

    <main class="flex items-center justify-center min-h-[65vh] px-8">
        <div class="glass-panel grid grid-cols-2 md:grid-cols-4 gap-y-10 md:gap-y-16 gap-x-4 md:gap-x-12 p-8 md:p-20 max-w-6xl w-full">
            <button id="openAboutBtn" class="nav-item">
                <i class="fa-solid fa-users-rays"></i>
                <span id="txt-about">About Us</span>
            </button>
            <a href="teachers-academy.html" class="nav-item">
                <i class="fa-solid fa-school-flag"></i>
                <span id="txt-academy">Teachers Academy</span>
            </a>
            <a href="international-camps.html" class="nav-item">
                <i class="fa-solid fa-map-location-dot"></i>
                <span id="txt-camps">International Camps</span>
            </a>
            <a href="international-olympics.html" class="nav-item">
                <i class="fa-solid fa-globe"></i>
                <span id="txt-olympics">International Olympics</span>
            </a>
            <a href="scholarships.html" class="nav-item">
                <i class="fa-solid fa-graduation-cap"></i>
                <span id="txt-scholarships">Scholarships</span>
            </a>
            <a href="#partners-section" class="nav-item">
                <i class="fa-solid fa-handshake-simple"></i>
                <span id="txt-partners">Partners</span>
            </a>
            <a href="articles.html" class="nav-item">
                <i class="fa-solid fa-file-lines"></i>
                <span id="txt-articles">Articles and Reports</span>
            </a>
            <a href="gallery.html" class="nav-item">
                <i class="fa-solid fa-images"></i>
                <span id="txt-gallery">Gallery</span>
            </a>
        </div>
    </main>

    <section id="contact-section" class="max-w-4xl mx-auto px-8 py-24">
        <div class="glass-panel p-10">
            <h2 id="txt-contact-title" class="text-3xl font-bold mb-8 text-center text-cyan-400">Get in Touch</h2>
            <form id="homeContactForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input type="text" id="contactName" placeholder="Full Name" required class="w-full bg-slate-800/50 rounded-xl p-4 border border-white/10 outline-none focus:border-cyan-400 transition">
                    <input type="email" id="contactEmail" placeholder="Email Address" required class="w-full bg-slate-800/50 rounded-xl p-4 border border-white/10 outline-none focus:border-cyan-400 transition">
                </div>
                <textarea id="contactMessage" rows="4" placeholder="How can we help you?" required class="w-full bg-slate-800/50 rounded-xl p-4 border border-white/10 outline-none focus:border-cyan-400 transition"></textarea>
                <button type="submit" id="txt-send-btn" class="w-full bg-cyan-500 text-slate-950 py-4 rounded-xl font-bold hover:bg-cyan-400 transition shadow-lg shadow-cyan-500/20">Send Message</button>
            </form>
        </div>
    </section>

    <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 z-[100] hidden">
        <div class="glass-panel px-8 py-4 flex items-center space-x-4 border-cyan-500/50 shadow-[0_0_20px_rgba(34,211,238,0.2)]">
            <i id="toastIcon" class="fa-solid fa-circle-check text-cyan-400 text-xl"></i>
            <span id="toastMessage" class="font-medium text-sm"></span>
        </div>
    </div>

    <section id="partners-section" class="max-w-6xl mx-auto px-8 py-24 border-t border-white/5">
        <h2 class="text-center text-slate-500 uppercase tracking-[0.4em] text-[10px] mb-16">Official Strategic Partners</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-12 items-center justify-items-center opacity-50 hover:opacity-100 transition-opacity">
            <img src="logo1.png" alt="Partner" class="h-10 grayscale hover:grayscale-0 transition duration-500">
            <img src="logo2.png" alt="Partner" class="h-10 grayscale hover:grayscale-0 transition duration-500">
            <img src="logo3.png" alt="Partner" class="h-10 grayscale hover:grayscale-0 transition duration-500">
            <img src="logo4.png" alt="Partner" class="h-10 grayscale hover:grayscale-0 transition duration-500">
        </div>
    </section>

    <footer class="w-full flex justify-center space-x-12 text-2xl opacity-40 py-12">
        <i class="fa-brands fa-instagram cursor-pointer hover:opacity-100 hover:text-cyan-400 transition"></i>
        <i class="fa-brands fa-facebook cursor-pointer hover:opacity-100 hover:text-cyan-400 transition"></i>
        <i class="fa-brands fa-telegram cursor-pointer hover:opacity-100 hover:text-cyan-400 transition"></i>
    </footer>

    <div id="aboutModal" class="hidden fixed inset-0 z-[70] flex items-center justify-center bg-black/80 backdrop-blur-xl p-4">
        <div class="glass-panel p-10 max-w-2xl w-full relative overflow-y-auto max-h-[90vh]">
            <button id="closeAboutBtn" class="absolute top-6 right-6 text-slate-400 hover:text-white transition">
                <i class="fa-solid fa-xmark text-2xl"></i>
            </button>
            <h2 id="modal-about-title" class="text-4xl font-bold mb-6 text-cyan-400">About GUERC</h2>
            <div class="space-y-6 text-slate-300 leading-relaxed">
                <p id="modal-about-p">Global Uzbek Education Research Center bridges local talent with global standards.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
                    <div class="bg-slate-900/50 p-4 rounded-2xl border border-white/5">
                        <h3 class="text-cyan-400 font-bold mb-2"><i class="fas fa-bullseye mr-2"></i> <span id="modal-mission-title">Mission</span></h3>
                        <p id="modal-mission-p" class="text-sm">Empowering the next generation through global education.</p>
                    </div>
                    <div class="bg-slate-900/50 p-4 rounded-2xl border border-white/5">
                        <h3 class="text-cyan-400 font-bold mb-2"><i class="fas fa-eye mr-2"></i> <span id="modal-vision-title">Vision</span></h3>
                        <p id="modal-vision-p" class="text-sm">A future of global innovation and research.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="authModal" class="hidden fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-md">
        <div class="glass-panel p-10 w-full max-w-md">
            <h2 id="modalTitle" class="text-2xl font-bold mb-6 text-center">Member Access</h2>
            <div class="space-y-4">
                <input type="email" id="authEmail" placeholder="Email" class="w-full bg-slate-800/50 rounded-xl p-3 border border-white/10 text-white outline-none">
                <input type="password" id="authPassword" placeholder="Password" class="w-full bg-slate-800/50 rounded-xl p-3 border border-white/10 text-white outline-none">
                <button id="authSubmitBtn" class="w-full bg-cyan-500 text-slate-950 py-3 rounded-xl font-bold hover:bg-cyan-400 transition">Sign In</button>
                <p class="text-center text-xs text-slate-400">Don't have an account? <span id="toggleAuth" class="text-cyan-400 cursor-pointer">Sign Up</span></p>
            </div>
            <button onclick="document.getElementById('authModal').classList.add('hidden')" class="w-full mt-4 text-slate-500 hover:text-white text-sm">Cancel</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function init() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            particles = [];
            for (let i = 0; i < 90; i++) {
                particles.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, vx: (Math.random() - 0.5) * 0.4, vy: (Math.random() - 0.5) * 0.4, size: Math.random() * 1.5 + 1 });
            }
        }
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const isLight = document.body.classList.contains('light-mode');
            const dotColor = isLight ? 'rgba(71, 85, 105, 0.4)' : 'rgba(34, 211, 238, 0.4)';
            const lineColor = isLight ? 'rgba(71, 85, 105, ' : 'rgba(34, 211, 238, ';
            particles.forEach((p, i) => {
                p.x += p.vx; p.y += p.vy;
                if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = dotColor; ctx.fill();
                for (let j = i + 1; j < particles.length; j++) {
                    const p2 = particles[j];
                    const dist = Math.hypot(p.x - p2.x, p.y - p2.y);
                    if (dist < 180) {
                        ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(p2.x, p2.y);
                        ctx.strokeStyle = `${lineColor}${0.15 - dist/180})`; ctx.lineWidth = 0.8; ctx.stroke();
                    }
                }
            });
            requestAnimationFrame(animate);
        }
        window.addEventListener('resize', init); init(); animate();
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendEmailVerification, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB3tnoCO0MwfSM-FH95cC52OyUHzaouC8E",
            authDomain: "guercllc.firebaseapp.com",
            projectId: "guercllc",
            storageBucket: "guercllc.firebasestorage.app",
            appId: "1:450126717624:web:4e152e748315b33cc68a4d"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // TOAST FUNCTION
        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const toastMsg = document.getElementById('toastMessage');
            const toastIcon = document.getElementById('toastIcon');
            toastMsg.innerText = message;
            if (isError) {
                toastIcon.className = "fa-solid fa-circle-exclamation text-red-400 text-xl";
                toast.querySelector('.glass-panel').classList.add('border-red-500/50');
                toast.querySelector('.glass-panel').classList.remove('border-cyan-500/50');
            } else {
                toastIcon.className = "fa-solid fa-circle-check text-cyan-400 text-xl";
                toast.querySelector('.glass-panel').classList.remove('border-red-500/50');
                toast.querySelector('.glass-panel').classList.add('border-cyan-500/50');
            }
            toast.classList.remove('hidden');
            setTimeout(() => { toast.classList.add('hidden'); }, 4000);
        }

        const translations = {
            uz: {
                flag: "https://flagcdn.com/w40/uz.png",
                title: "Global Uzbek Education", subtitle: "Research Center",
                about: "Biz haqimizda", academy: "Akademiya", camps: "Oromgohlar", olympics: "Olimpiadalar", scholarships: "Grantlar", partners: "Hamkorlar", articles: "Maqolalar", gallery: "Galereya",
                contactT: "Biz bilan bog'laning", send: "Xabar yuborish", success: "Xabar yuborildi!",
                aboutT: "GUERC Haqida", aboutP: "Global Uzbek Education Research Center mahalliy iste'dodlarni global standartlar bilan bog'laydi.",
                missionT: "Missiyamiz", missionP: "Global ta'lim orqali yangi avlodni tarbiyalash.",
                visionT: "Vizyonimiz", visionP: "Global innovatsiyalar va tadqiqotlar kelajagi.",
                verifyEmail: "Iltimos, pochtangizni tekshiring va hisobingizni tasdiqlang!"
            },
            en: {
                flag: "https://flagcdn.com/w40/gb.png",
                title: "Global Uzbek Education", subtitle: "Research Center",
                about: "About Us", academy: "Academy", camps: "Camps", olympics: "Olympics", scholarships: "Scholarships", partners: "Partners", articles: "Articles", gallery: "Gallery",
                contactT: "Get in Touch", send: "Send Message", success: "Message Sent!",
                aboutT: "About GUERC", aboutP: "Global Uzbek Education Research Center bridges local talent with global standards.",
                missionT: "Mission", missionP: "Empowering the next generation through global education.",
                visionT: "Vision", visionP: "A future of global innovation and research.",
                verifyEmail: "Please check your email and verify your account!"
            },
            tr: {
                flag: "https://flagcdn.com/w40/tr.png",
                title: "Global Özbek Eğitimi", subtitle: "Araştırma Merkezi",
                about: "Hakkımızda", academy: "Akademi", camps: "Kamplar", olympics: "Olimpiyatlar", scholarships: "Burslar", partners: "Ortaklar", articles: "Makaleler", gallery: "Galeri",
                contactT: "Bize Ulaşın", send: "Mesaj Gönder", success: "Mesaj Gönderildi!",
                aboutT: "GUERC Hakkında", aboutP: "Global Özbek Eğitim Araştırma Merkezi yerel yetenekleri küresel standartlarla buluşturur.",
                missionT: "Misyon", missionP: "Küresel eğitimle gelecek nesli güçlendirmek.",
                visionT: "Vizyon", visionP: "Küresel inovasyon ve araştırma geleceği.",
                verifyEmail: "Lütfen e-postanızı kontrol edin ve hesabınızı doğrulayın!"
            }
        };

        window.changeLang = (lang) => {
            const data = translations[lang];
            localStorage.setItem('preferredLang', lang);
            document.getElementById('currentFlag').src = data.flag;
            document.getElementById('main-title').innerText = data.title;
            document.getElementById('main-subtitle').innerText = data.subtitle;
            document.getElementById('txt-about').innerText = data.about;
            document.getElementById('txt-academy').innerText = data.academy;
            document.getElementById('txt-camps').innerText = data.camps;
            document.getElementById('txt-olympics').innerText = data.olympics;
            document.getElementById('txt-scholarships').innerText = data.scholarships;
            document.getElementById('txt-partners').innerText = data.partners;
            document.getElementById('txt-articles').innerText = data.articles;
            document.getElementById('txt-gallery').innerText = data.gallery;
            document.getElementById('txt-contact-title').innerText = data.contactT;
            document.getElementById('txt-send-btn').innerText = data.send;
            document.getElementById('modal-about-title').innerText = data.aboutT;
            document.getElementById('modal-about-p').innerText = data.aboutP;
            document.getElementById('modal-mission-title').innerText = data.missionT;
            document.getElementById('modal-mission-p').innerText = data.missionP;
            document.getElementById('modal-vision-title').innerText = data.visionT;
            document.getElementById('modal-vision-p').innerText = data.visionP;
        };

        document.getElementById('homeContactForm').onsubmit = async (e) => {
            e.preventDefault();
            const lang = localStorage.getItem('preferredLang') || 'uz';
            try {
                await addDoc(collection(db, "applications"), {
                    category: "General Inquiry",
                    name: document.getElementById('contactName').value,
                    email: document.getElementById('contactEmail').value,
                    message: document.getElementById('contactMessage').value,
                    date: new Date().toISOString()
                });
                showToast(translations[lang].success);
                e.target.reset();
            } catch (err) { showToast(err.message, true); }
        };

        const authModal = document.getElementById('authModal');
        const userBtn = document.getElementById('userBtn');
        const logoutBtn = document.getElementById('memberLogoutBtn');
        let isLogin = true;

        userBtn.onclick = () => authModal.classList.remove('hidden');
        logoutBtn.onclick = () => signOut(auth);
        
        document.getElementById('toggleAuth').onclick = () => {
            isLogin = !isLogin;
            document.getElementById('modalTitle').innerText = isLogin ? "Member Access" : "Create Account";
            document.getElementById('authSubmitBtn').innerText = isLogin ? "Sign In" : "Register";
        };

        document.getElementById('authSubmitBtn').onclick = async () => {
            const email = document.getElementById('authEmail').value;
            const pass = document.getElementById('authPassword').value;
            const lang = localStorage.getItem('preferredLang') || 'en';
            try {
                if(isLogin) {
                    await signInWithEmailAndPassword(auth, email, pass);
                } else {
                    const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
                    await sendEmailVerification(userCredential.user);
                    showToast(translations[lang].verifyEmail);
                }
                authModal.classList.add('hidden');
            } catch (e) { showToast(e.message, true); }
        };

        onAuthStateChanged(auth, (u) => {
            userBtn.classList.toggle('hidden', !!u);
            logoutBtn.classList.toggle('hidden', !u);
        });

        document.getElementById('openAboutBtn').onclick = () => document.getElementById('aboutModal').classList.remove('hidden');
        document.getElementById('closeAboutBtn').onclick = () => document.getElementById('aboutModal').classList.add('hidden');

        const themeToggle = document.getElementById('themeToggle');
        themeToggle.onclick = () => {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            themeToggle.classList.replace(isLight ? 'fa-moon' : 'fa-sun', isLight ? 'fa-sun' : 'fa-moon');
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        };

        const savedLang = localStorage.getItem('preferredLang') || 'uz';
        window.changeLang(savedLang);
        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-mode');
            themeToggle.classList.replace('fa-moon', 'fa-sun');
        }
    </script>
</body>
</html>